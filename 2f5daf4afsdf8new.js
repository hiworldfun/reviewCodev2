window.kBinanceAlpha={...window.kBinanceAlpha},(self.webpackChunkalpha_ui=self.webpackChunkalpha_ui||[]).push([["2548"],{42318:function(e,t,a){"use strict";a.d(t,{$5:()=>i,B2:()=>n});var r=a(5034),s=a(45549);let n=async e=>{let t;try{t=await(0,r.v_)("/bapi/defi/v1/private/wallet-direct/swap/cex/batch/order/history",e)}catch(e){let a="";e instanceof Error&&(a=e.message),t={success:!1,msg:a,data:[]}}return t},i=async e=>{let t;try{t=await(0,r.U2)(`/bapi/defi/v1/private/alpha-trade/order/get-order-history-merge?${(0,s.DT)(e)}`)}catch(e){let a="";e instanceof Error&&(a=e.message),t={success:!1,msg:a,data:[]}}return t};window.kBinanceAlpha.getOrderHistory=async e=>{let t;try{t=await(0,r.U2)(`/bapi/defi/v1/private/alpha-trade/order/get-order-history-merge?${(0,s.DT)(e)}`).then((e=>e))}catch(e){let a="";e instanceof Error&&(a=e.message),t={success:!1,msg:a,data:[]}}return t},window.kBinanceAlpha.cancelAllAlphaLimitOrders=async()=>{let e;try{e=await(0,r.v_)("/bapi/defi/v1/private/alpha-trade/order/cancel-all",{})}catch(t){let a="";t instanceof Error&&(a=t.message),e={success:!1,msg:a,data:[]}}return e},window.kBinanceAlpha.cancelAlphaLimitOrder=async e=>{let t;try{t=await(0,r.v_)("/bapi/defi/v1/private/alpha-trade/order/cancel",e)}catch(e){let a="";e instanceof Error&&(a=e.message),t={success:!1,msg:a,data:[]}}return t},window.kBinanceAlpha.getLimitOpenOrders=async({side:e})=>{let t;try{t=await(0,r.U2)(`/bapi/defi/v1/private/alpha-trade/order/get-open-order?side=${e}`)}catch(e){let a="";e instanceof Error&&(a=e.message),t={success:!1,msg:a,data:[]}}return t}},4751:function(e,t,a){var r=a(24303);e.exports=function(e,t){var a;return r(e,(function(e,r,s){return!(a=t(e,r,s))})),!!a}},51525:function(e,t,a){var r=a(87064),s=a(68286),n=a(4751),i=a(86152),l=a(82406);e.exports=function(e,t,a){var o=i(e)?r:n;return a&&l(e,t,a)&&(t=void 0),o(e,s(t,3))}},99179:function(e,t,a){"use strict";a.r(t),a.d(t,{default:()=>j});var r=a(52322),s=a(87363),n=a(91293);let i=({children:e})=>(0,r.jsx)("div",{className:"flex items-center justify-center w-full h-full bg-BasicBg typography-subtitle2 text-TertiaryText",children:e});var l=a(81619),o=a(42660),d=a(51817),c=a(88086),u=a(82066),m=a(70088),p=a(5034),h=a(45549);let v=async e=>{let{chainId:t,contractAddress:a,interval:r,limit:s,startTime:n,endTime:i,sourceType:l}=e;return(0,p.U2)(`/bapi/defi/v1/public/alpha-trade/agg-klines?${(0,h.DT)({chainId:t,interval:r,limit:s,startTime:n,endTime:i,tokenAddress:a,dataType:l})}`)},f=e=>{let{data:t,isLoading:a,error:r}=(0,u.useQuery)(m.i.QUERY_ALPHA_KLINE_PRECISION(e),(()=>v(e)),{staleTime:1/0});return{data:t,isLoading:a,error:r}};var y=a(52165),g=a(38449);let b=e=>{let{namespace:t}=e,{t:a}=(0,g.yk)(),[r]=n.kL.Store.createStore(t)(n.kL.Store.getInterval),{symbol:i}=(0,d.r)()||{},l=y.dj(),o=(0,s.useMemo)((()=>l(r)),[l,r]);return(0,s.useMemo)((()=>a("unsupported-interval",{defaultValue:"{{interval}} is not currently supported for {{symbol}} token",interval:o,symbol:i})),[o,a,i])},k=()=>{let{t:e}=(0,g.cK)();return(0,s.useMemo)((()=>e("trd-data-source-not-ava",{defaultValue:"No data available. Please go to Alpha Data Source to make adjustments."})),[e])};var T=a(36947);let A=e=>{let[t,a,r,s,n,i]=e;return{time:+t,open:+a,high:+r,low:+s,close:+n,volume:+i,quantity:0}},w=async e=>{try{return(await v(e)).data.klineInfos||[]}catch(e){return console.warn("no response available",e),[]}},I=async e=>(await(async e=>{let{chainId:t,contractAddress:a,interval:r,mode:s,startTime:n,endTime:i,sourceType:l}=e;switch(s){case"time-range":case"load-past":return i?w({chainId:t,contractAddress:a,interval:r,endTime:i-1,limit:500,sourceType:l}):[];case"load-future":case"go-to-date":return w({chainId:t,contractAddress:a,interval:r,startTime:n,limit:500,sourceType:l});default:return w({chainId:t,contractAddress:a,interval:r,limit:500,sourceType:l})}})(e)).map(A),S=(0,T.f_)(),L=e=>{let{chainId:t,contractAddress:a,sourceType:r}=e;return(0,s.useMemo)((()=>t&&a&&r?(e=>{let{chainId:t,contractAddress:a,sourceType:r}=e,s=()=>null;return{trackingData:{klineDataQueue:[]},getData:async function(e){let{startTime:s,endTime:n,mode:i,seriesData:l,interval:o}=e,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>!1,c=y.ps(o);try{let e=await I({chainId:t,contractAddress:a,interval:c,startTime:s,endTime:n,mode:i,seriesData:l,sourceType:r});d({data:e,isLoadAll:0===e.length})}catch(e){console.warn("errors while fetching kline data",e)}},subscribe:(e,n)=>{let{interval:i}=e,l=y.ps(i);s=S.getKlineStream({chainId:t,contractAddress:a,interval:l,sourceType:r}).subscribe((e=>{let{data:t}=e,{k:a}=t;n({time:+a.ot,open:+a.o,high:+a.h,low:+a.l,close:+a.c,volume:+a.v,quantity:0})}))},unsubscribe:()=>{s()},subscribeAskBid:()=>null,unsubscribeAskBid:()=>null,getBarDatas:()=>null,subcribe:()=>null,unSubcribe:()=>{s()}}})({chainId:t,contractAddress:a,sourceType:r}):{getBarDatas:()=>Promise.resolve({data:[],isLoadAll:!0}),subscribe:()=>null,unsubscribe:()=>null,subcribe:()=>null,unSubcribe:()=>null}),[t,a,r])};var x=a(42759);let D=e=>{let{namespace:t}=e;return{rightClickPlaceOrder:{visible:!1},timeTool:{visible:!1},createAlert:{visible:!1},moreSettings:(0,x.g)({namespace:t})}};var E=a(83289),_=a(35312),B=a(78369),C=a(44637);let M=(0,a(57550).O)("6m"),O={page:1,pageSize:1e3,status:["success"],startTime:M.startTime,endTime:M.endTime},P=e=>{let{namespace:t,chainId:a,contractAddress:r}=e,i=n.kL.Store.createStore(t),{getI18n:l}=(0,E.Z)("","trade-ui"),[o]=i(n.kL.Store.getShowExecutionOrder),d=(0,s.useMemo)((()=>l("trd-openOrder-sideBuyBOTH",{defaultValue:"Buy"})||""),[l]),c=(0,s.useMemo)((()=>l("trd-openOrder-sideSellBOTH",{defaultValue:"Sell"})||""),[l]),{data:u,isLoading:m}=(0,_.o)(O,{enabled:o}),p=(0,s.useMemo)((()=>u.filter((e=>{let{status:t,fromBinanceChainId:s,toBinanceChainId:n,fromContractAddress:i,toContractAddress:l}=e;return!(s!==a&&n!==a||i!==r&&l!==r||"success"!==t)})).map((e=>{let{orderId:t,dbUpdateTime:a,direction:r,fromTokenAmount:s,toTokenAmount:n}=e,i="buy"===r;return{id:t,time:a,isBuy:i,text:`${i?d:c} ${(0,C.E$)(i?n:s,B.Bu.MIDDLE)}`}}))),[u,a,r,d,c]);return m?[]:p};var N=a(3528),R=a(5150);let q=e=>{var t;let{tokens:a,enabled:r}=e,{data:s,isLoading:n,error:i}=(0,u.useQuery)(m.i.QUERY_ALPHA_AVERAGE_COSTS({tokens:a}),(()=>(async({tokens:e})=>(0,p.v_)("/bapi/apex/v1/private/apex/alpha/pnl/avg-cost",{tokens:e}))({tokens:a})),{staleTime:0,enabled:r});return{data:(null==s||null==(t=s.data)?void 0:t.tokensAvgCost)||[],isLoading:n,error:i}},Q=e=>{let{namespace:t,tickSize:a,alphaId:r}=e,{getI18n:n}=(0,E.Z)(),{cost:i,formattedCost:l}=(e=>{let{namespace:t,tickSize:a,alphaId:r}=e,[n]=N.createStore(t)(N.getShowCostPrice),{data:i}=q({tokens:[r],enabled:n}),l=(0,s.useMemo)((()=>i.find((e=>e.token===r))),[i,r]),o=(0,s.useMemo)((()=>+((null==l?void 0:l.avgCost)||NaN)),[null==l?void 0:l.avgCost]),d=(0,s.useMemo)((()=>(0,R.uf)(o,a)),[o,a]);return{cost:o,formattedCost:d}})({namespace:t,tickSize:a,alphaId:r}),o=(0,s.useMemo)((()=>n("trd-chart-cost-price-text",{defaultValue:"Cost Price"})),[n]),d=(0,s.useMemo)((()=>[{price:i,text:o,priceText:l}].filter((e=>e.price>0))),[o,i,l]);return(0,s.useMemo)((()=>d.map((e=>{let{price:t,text:a,priceText:r}=e;return{price:t,text:a,priceText:r,type:N.LabelLineType.CostPrice}}))),[d])},j=e=>{var t;let{namespace:a}=e,{symbol:u="",alphaId:m="",chainId:p="",contractAddress:h=""}=(0,d.r)()||{},v=n.kL.Store.createStore(a),y=n.kL.SessionStore.createStore(a),[g]=v(n.kL.Store.getInterval),T=(0,c.q)((e=>e.sourceType)),[A]=y(n.kL.SessionStore.getCandlestickReference),{data:w,isLoading:I}=f({chainId:p,contractAddress:h,interval:"time"===g?"1m":g,sourceType:T}),S=(0,s.useMemo)((()=>void 0===w||null!=w&&!!w.success||"100001001"!==w.code&&"-5099"!==w.code),[w]),x=(0,s.useMemo)((()=>void 0===w||null!=w&&!!w.success||"-5101"!==w.code),[w]),E=(0,s.useMemo)((()=>{var e;return(null==w||null==(e=w.data)?void 0:e.decimals)||2}),[null==w||null==(t=w.data)?void 0:t.decimals]),_=b({namespace:a}),B=k(),C=L({chainId:p,contractAddress:h,sourceType:T}),M=D({namespace:a}),O=P({namespace:a,chainId:p,contractAddress:h}),N=Q({namespace:a,alphaId:m,tickSize:E}),R=(0,s.useMemo)((()=>({tickSize:E})),[E]);return(0,s.useEffect)((()=>{A&&(A.setAttr("volumePrecision",4),A.setAttr("volumeFormatNumber",!1),A.setAttr("volumeUseBase",!1))}),[A]),(0,r.jsxs)("div",{className:"relative h-full w-full",children:[g?(0,r.jsx)("div",{className:"h-full w-full",style:{visibility:I?"hidden":"visible"},children:(0,r.jsx)(n.kL.Containers.BasicKline,{klineOptions:{symbol:u,storeSymbol:u,candlestick:R,baseAsset:u,dataProvider:C,namespace:a,isShowDrawPanel:!0,isShowAnnotationPanel:!0,contextMenu:M},symbolDisplay:u,executionOrders:O,labelLines:N,bizType:"trade",setMessageInfo:()=>null,enableBacktest:!1,electron:l.Z})}):null,S&&x?null:(0,r.jsxs)("div",{className:"absolute top-0 left-0 w-full h-full",children:[S?null:(0,r.jsx)(i,{children:_}),x?null:(0,r.jsx)(i,{children:(0,r.jsxs)("div",{className:"p-[24px] flex flex-col justify-center items-center",children:[(0,r.jsx)("img",{className:"w-[96px] h-[96px]",src:`${o.Xs}/static/images/spot/noklinedata.png`}),(0,r.jsxs)("div",{children:[B," "]})]})})]})]})}},57550:function(e,t,a){"use strict";a.d(t,{O:()=>r});let r=e=>{let t,a=(new Date).setHours(23,59,59,0),r=new Date;switch(r.setHours(0,0,0,0),e){case"6m":t=r.setMonth(r.getMonth()-6);break;case"1m":t=r.setMonth(r.getMonth()-1);break;case"1w":t=r.setDate(r.getDate()-7);break;default:t=r.setDate(r.getDate()-1),e="1d"}return{type:e,startTime:t,endTime:a}}},35312:function(e,t,a){"use strict";a.d(t,{o:()=>p});var r=a(87363),s=a(76635),n=a(32963),i=a(70088),l=a(42318),o=a(82066),d=a(55281),c=a.n(d),u=a(52595);let m=e=>{let{response:t,oldData:a,page:r}=e;if(!(null==a?void 0:a.data))return a;let n=!1,i=(0,s.cloneDeep)(a);if("processing"===t.status)return a;for(let e=0;e<(null==i?void 0:i.data.length);e++){var l;let a=(null==i||null==(l=i.data)?void 0:l[e])||{data:[]},r=c()(a,{orderId:null==t?void 0:t.orderId});r&&(n=!0,r.status=t.status)}return n||1!==r||i.data.unshift(t),i},p=function(e){let{enabled:t=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{enabled:!0},a=(0,n._n)(),s=(0,r.useMemo)((()=>a&&t),[a,t]),d=(0,o.useQueryClient)(),c=e.status?e:{...e,status:["success","failure"]},{isLoading:p,data:h,refetch:v,remove:f,isFetched:y}=(0,o.useQuery)({queryKey:[i.i.QUERY_ALPHA_ORDER_LIST[0],e],queryFn:()=>(0,l.B2)({...c}),keepPreviousData:!0,enabled:s}),g=Math.ceil(((null==h?void 0:h.total)||0)/Number(e.pageSize)),b=null==h?void 0:h.data;return(0,r.useEffect)((()=>a&&y?(0,u.q)((t=>{d.setQueryData([i.i.QUERY_ALPHA_ORDER_LIST[0],e],(a=>m({response:t,oldData:a||{data:[]},page:null==e?void 0:e.page})))})):()=>{}),[a,y,e,d]),{data:b||[],isLoading:p,refetch:()=>{f(),v()},isFetched:y,total:g}}},52595:function(e,t,a){"use strict";a.d(t,{q:()=>b,r:()=>T});var r=a(87363),s=a(32963),n=a(70088),i=a(5034);let l=async()=>{let e;try{e=await(0,i.v_)("/bapi/defi/v1/private/wallet-direct/swap/cex/processing/order/history")}catch(t){let a="";t instanceof Error&&(a=t.message),e={success:!1,msg:a,data:[]}}return e};var o=a(82066),d=a(26034),c=a(64116),u=a.n(c),m=a(51525),p=a.n(m),h=a(20763),v=a(38449),f=a(44637),y=a(78369),g=a(3276);let b=e=>(0,d.K)({channel:"WEB3_CEX_ALPHA_ORDER_CHANGE",responseName:"alphaCexOrderChangeMsg"})((t=>{e(t)})),k=e=>{let{response:t,oldData:a,showSuccess:r}=e;var s;if("processing"===(null==t?void 0:t.status)&&!p()(null==a?void 0:a.data,{orderId:null==t?void 0:t.orderId}))return!a||!a.data||(null==a||null==(s=a.data)?void 0:s.length)<=0?{data:[t]}:{...a,data:[t,...a.data]};let n=null==a?void 0:a.data;return p()(null==a?void 0:a.data,{orderId:null==t?void 0:t.orderId})&&"success"===(null==t?void 0:t.status)&&r({quantity:"buy"===t.direction?t.toTokenAmount:t.fromTokenAmount,base:"buy"===t.direction?t.toToken:t.fromToken,quote:"buy"===t.direction?t.fromToken:t.toToken,side:t.direction}),u()(n,(e=>e.orderId===(null==t?void 0:t.orderId))),{...a,data:n}},T=e=>{var t;let a=(0,s._n)(),i=(0,o.useQueryClient)(),d=(0,g.d)(),{t:c}=(0,v.cK)(),{showSuccessNotification:u}=(0,h.l)(),{isLoading:m,data:p,refetch:T}=(0,o.useQuery)(n.i.QUERY_ALPHA_PROCESSING_LIST,(async()=>await l()),{enabled:a||!1,staleTime:1/0}),A=(0,r.useCallback)((e=>{let{quantity:t,base:a,quote:r,side:s}=e;u(c(`order-fill-${s}-text`,{defaultValue:"The instant order to buy {{quantity}} {{base}} for {{quote}} has been filled.",quantity:(0,f.E$)(t,y.Bu.MIDDLE),base:a,quote:r}),c(`order-fill-${s}-title`,{defaultValue:"Instant Buy Order Filled"}))}),[u,c]);return(0,r.useEffect)((()=>a&&d?b((t=>{i.setQueryData(n.i.QUERY_ALPHA_PROCESSING_LIST,(a=>k({response:t,oldData:a,showSuccess:e?A:()=>{}})))})):()=>{}),[a,i,A,e,d]),{data:(null==p?void 0:p.data)||[],isLoading:m,refetch:T,number:(null==p||null==(t=p.data)?void 0:t.length)||0}}}}]);